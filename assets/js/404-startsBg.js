document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("starsCanvas"),t=new THREE.WebGLRenderer({canvas:e,antialias:!0});t.setSize(window.innerWidth,window.innerHeight);const n=new THREE.Scene,o=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,2e3);o.position.z=1e3;const r=[16711680,65280,255,16711935,65535,16776960],i=function(){const e=new THREE.BufferGeometry,t=new Float32Array(18e4),n=new Float32Array(18e4),o=new Float32Array(6e4);for(let e=0;e<6e4;e++){const i=3*e;t[i]=2e3*(Math.random()-.5),t[i+1]=2e3*(Math.random()-.5),t[i+2]=2e3*(Math.random()-.5);const a=new THREE.Color(r[Math.floor(Math.random()*r.length)]);n[i]=a.r,n[i+1]=a.g,n[i+2]=a.b,o[e]=2*Math.random()+1}e.setAttribute("position",new THREE.BufferAttribute(t,3)),e.setAttribute("color",new THREE.BufferAttribute(n,3)),e.setAttribute("size",new THREE.BufferAttribute(o,1));const i=new THREE.PointsMaterial({size:3,sizeAttenuation:!0,vertexColors:!0,blending:THREE.AdditiveBlending,transparent:!0,opacity:.9,emissive:new THREE.Color(65535),emissiveIntensity:.6});return new THREE.Points(e,i)}();n.add(i);const a=function(){const e=new THREE.SphereGeometry(500,60,60),t=(new THREE.TextureLoader).load("nebula_texture.jpg"),n=new THREE.MeshBasicMaterial({map:t,opacity:.2,transparent:!0,wireframe:!1,blending:THREE.AdditiveBlending});return new THREE.Mesh(e,n)}();n.add(a);let s=0,d=0;const E=function(){const e=5e3,t=new THREE.BufferGeometry,n=new Float32Array(15e3),o=new Float32Array(15e3);for(let t=0;t<e;t++){const e=3*t;n[e]=2e3*Math.random()-1e3,n[e+1]=2e3*Math.random()-1e3,n[e+2]=2e3*Math.random()-1e3;const r=new THREE.Color(Math.random(),Math.random(),Math.random());o[e]=r.r,o[e+1]=r.g,o[e+2]=r.b}t.setAttribute("position",new THREE.BufferAttribute(n,3)),t.setAttribute("color",new THREE.BufferAttribute(o,3));const r=new THREE.PointsMaterial({size:.8,vertexColors:!0,blending:THREE.AdditiveBlending,transparent:!0,opacity:.8});return new THREE.Points(t,r)}();n.add(E),document.addEventListener("mousemove",(e=>{s=e.clientX/window.innerWidth*2-1,d=-e.clientY/window.innerHeight*2+1})),function e(){requestAnimationFrame(e);const r=i.geometry.attributes.position.array;for(let e=0;e<6e4;e++){const t=3*e,n=r[t],o=r[t+1],i=r[t+2],a=Math.sqrt(n*n+o*o+i*i),E=.002,w=Math.cos(E),c=Math.sin(E),u=-.2*(2e3-a)/2e3;r[t]=w*n-c*o+u*n/a,r[t+1]=c*n+w*o+u*o/a,r[t+2]=i+u*i/a,a<50&&(r[t]=2e3*(Math.random()-.5),r[t+1]=2e3*(Math.random()-.5),r[t+2]=2e3*(Math.random()-.5));const h=500*s-n,l=500*d-o,m=Math.sqrt(h*h+l*l);if(m<150){const e=2e-4*(150-m);r[t]+=h*e,r[t+1]+=l*e}}i.geometry.attributes.position.needsUpdate=!0,i.rotation.x+=6e-4,i.rotation.y+=6e-4,a.rotation.x+=2e-4,a.rotation.y+=2e-4,E.rotation.x+=.001,E.rotation.y+=.001,t.render(n,o)}(),window.addEventListener("resize",(()=>{o.aspect=window.innerWidth/window.innerHeight,o.updateProjectionMatrix(),t.setSize(window.innerWidth,window.innerHeight)}))}));