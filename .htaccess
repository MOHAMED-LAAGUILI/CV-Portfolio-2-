# Enable caching for specific file types
<FilesMatch "\.(html)$">
    Header set Cache-Control "max-age=86400, public"
</FilesMatch>

<FilesMatch "\.(css)$">
    Header set Cache-Control "max-age=604800, public"
</FilesMatch>

<FilesMatch "\.(js)$">
    Header set Cache-Control "max-age=604800, public"
</FilesMatch>

<FilesMatch "\.(png|ico|jpeg|gif|svg|webp|mp4|webm|ogv|mov|wmv|avi|flv|mkv|jpg|pdf)$">
    Header set Cache-Control "max-age=2592000, public"
</FilesMatch>

# Security headers
Header set X-Powered-By "Mohamed Web Dev v3.1"
Header set X-Content-Type-Options "nosniff"
Header set X-Frame-Options "DENY"
Header set X-XSS-Protection "1; mode=block"
Header set Referrer-Policy "no-referrer-when-downgrade"
Header set Server "Secure Web Dev"
Header set Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
Header set Content-Security-Policy "default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; font-src 'self' data:;"
Header set Permissions-Policy "geolocation=(), microphone=(), camera=()"

# Custom error page for 404
ErrorDocument 404 /404.html

# Force HTTPS (if not already enforced)
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Ensure that HTTP headers are allowed in response
<IfModule mod_headers.c>
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-Frame-Options "DENY"
    Header always set X-XSS-Protection "1; mode=block"
    Header always set Referrer-Policy "no-referrer-when-downgrade"
    Header always set Server "Secure Web Dev"
    Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
    Header always set Content-Security-Policy "default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; font-src 'self' data:;"
    Header always set Permissions-Policy "geolocation=(), microphone=(), camera=()"
</IfModule>
